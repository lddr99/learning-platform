<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<h1 class="mt-5 mb-5 text-center">Management - Course Editor</h1>
<hr class="mb-5" />
<div id="app">
  <div class="container">
    <div class="card-deck">
      <div class="card text-white bg-dark"
        v-for="course in courses"
        :key="course.id"
      >
        <div class="card-header">{{ course.title }}</div>
        <div class="card-body">
          <form>
            <div class="form-group">
              <label>Title</label>
              <input type="text" class="form-control" v-model="course.title">
            </div>
            <div class="form-group">
              <label>URL</label>
              <input type="text" class="form-control" v-model="course.url">
            </div>
            <div class="form-group">
              <label>Description</label>
              <input type="text" class="form-control" v-model="course.description">
            </div>
            <div class="form-group">
              <label>Price</label>
              <input type="number" class="form-control" v-model="course.price.amount">
            </div>
            <div class="form-group">
              <label :for="'duration_of_days' + course.id">duration_of_days {{ course.duration_of_days }}</label>
              <input type="range" class="custom-range" min="1" max="30"
                :id="'duration_of_days' + course.id"
                v-model="course.duration_of_days"
              >
            </div>
            <div class="form-group">
              <div class="custom-control custom-switch">
                <input class="custom-control-input" type="checkbox" :id="'availableCheck' + course.id"
                  v-model="course.is_available"
                >
                <label class="custom-control-label" :for="'availableCheck' + course.id">
                  is_available
                </label>
              </div>
            </div>
            <div class="d-flex">
              <button type="button" class="flex-shrink-1 btn btn-outline-light">Delete</button>
              &nbsp;
              <button type="submit" class="w-100 btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
new Vue({
  el: '#app',
  data () {
    return {
      courses: [],
    }
  },
  created () {
    this.fetchCourses();
  },
  methods: {
      fetchCourses() {
        axios.get('/api/courses')
          .then(({data}) => (this.courses = data));
      },
  }
})
</script>
